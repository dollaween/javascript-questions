# Javascript. Вопросы по движку

---

##### 1. Javascript компилируемый или интерпретируемый язык?
<details><summary><b>Ответ</b></summary>
<p>

Javascript интерпретируемый язык.

**Компилируемые языки** — исходный код преобразуется компилятором в машинный код и записывается в файл. Код компилируется до выполнения.

Преимущества:
- Код оптимизирован максимально для той системы, под которую скомпилирован.

Недостатоки:
- При смене системы, если нет исходников — мы теряем программу.

**Интерпретируемые языки** — исходный код исполняется программой-интерпретатором.

Преимущества:
- Легко достичь кросс-платформенности

</p>
</details>

---

##### 2. Что такое контекст выполнения (Execution context)? Как JS-движок создает и управляет контекстом выполнения?
<details><summary><b>Ответ</b></summary>
<p>

**Контекст выполнения (Execution context)** — это концепция, описывающая окружение, в котором производится выполнение кода на JS.

Существует три типа контекстов:
1. Глобальный контекст выполнения — это базовый, используемый по умолчанию контекст выполнения. Если код находится не внутри функции, значит он принадлежит глобальному контексту.
2. Контекст выполнения функции. Каждый раз, когда вызывается функция, для нее создается новый контекст. Каждая функция имеет собственный контекст выполнения.
3. Контекст выполнения функции `eval`.

Стадия создания контекста выполнения:
1. Определяется значение `this` и выполняется привязка `this`
2. Создается компонент LexicalEnvironment (лексическое окружение)
3. Создается компонент VariableEnvironment (окружение переменных)

Управление контекстом выполнения:
1. Движок создает глобальный контекст выполнения и помещает его в **стек вызовов (call stack)**
2. При обнаружении команды вызова функции движок создает новый контекст выполнения для этой функции и помещает его в верхнюю часть стека
3. Движок выполняет функцию, контекст выполнения которой находится в верхней части **стека вызовов**
4. Когда выполнение функции завершится, её контекст извлекается из стека и управление переходит тому контексту, который находится в предыдущем элементе стека

</p>
</details>

---

##### 3. Что такое `this`? Как происходит привязка `this`?

<details><summary><b>Ответ</b></summary>
<p>

`this` — это ключевое слово, которое содержит ссылку на некоторый объект.

В глобальном контексте выполнения `this` содержит ссылку на глобальный объект.

В контексте выполнения функции значение `this` зависит от того, как именно была вызвана функция.
Если она вызвана в виде метода объекта, тогда значение `this` привязано к этому объекту.
В других случаях `this` привязывается к глобальному объекту или устанавливается в `undefined` (в строгом режиме).

</p>
</details>

---

##### 4. Что такое лексическое окружение?
<details><summary><b>Ответ</b></summary>
<p>

**Лексическое окружение** — это структура, которая хранит сведения о соответствии идентификаторов (имя переменной) и переменных (ссылка на конкретный объект или примитивное значение).

В лексическом окружении имеется два компонента:
1. **Запись окружения (Environment Record)** — место, где хранятся объявления переменных и функций
2. Ссылка на внешнее лексическое окружение, наличие которой говорит о доступе к родительскому лексическому окружению

Существует два типа лексических окружений:
1. Глобальное окружение — это лексическое окружение, у которого ссылка на внешнее окружение равно `null`
2. Окружение функции

</p>
</details>

---

Ссылки:
* [Контекст выполнения и стек вызовов в Javascript](https://habr.com/ru/company/ruvds/blog/422089/)
* [Замыкания, функции изнутри](https://learn.javascript.ru/closures)
